# Тестовое задание для курса Python ШИФТ

**Описание задачи** — Реализуйте REST-сервис просмотра текущей зарплаты и даты следующего
повышения. Из-за того, что такие данные очень важны и критичны, каждый сотрудник
может видеть только свою сумму. Для обеспечения безопасности, вам потребуется
реализовать метод где по логину и паролю сотрудника будет выдан секретный токен,
который действует в течение определенного времени. Запрос данных о зарплате
должен выдаваться только при предъявлении валидного токена.

---

### Требования:

- Python 3.11+
- Poetry

### Установка зависимостей:

```bash
poetry install
```

### Запуск сервиса:

```bash
poetry run uvicorn server:app --reload
```

После запуска открыть в браузере:

Swagger UI: http://127.0.0.1:8000/docs

Redoc: http://127.0.0.1:8000/redoc

### Взаимодействие с API:

### 1. Авторизация:

POST /login

Получить токен авторизации.

Пример запроса:

```bash
{
  "username": "maxim",
  "password": "1234567890"
}
```

Пример ответа:

```bash
{
  "access_token": "1234abcd-5678-efgh",
  "token_type": "bearer",
  "expires_in": 300
}
```

### 2. Получение зарплаты:

GET /salary

Требуется заголовок Authorization.

Пример заголовка:

```bash
Authorization: Bearer 1234abcd-5678-efgh
```

Пример ответа:

```bash
{
  "username": "maxim",
  "salary": 100000,
  "next_raise": "2025-09-01"
}
```

### Доступные пользователи:

| username | password        | salary | next\_raise |
| -------- | --------------- | ------ | ----------- |
| maxim    | 1234567890      | 100000 | 2025-09-01  |
| bob      | qwertyuiop12345 | 80000  | 2025-12-15  |

### Запуск тестов:

В проекте реализованы тесты с использованием pytest и httpx.

### Запуск всех тестов:

```bash
poetry run pytest
```

### Структура проекта:

```
fastapi_salary/
├── server.py              # Основное приложение FastAPI
├── test_login.py          # Тест: авторизация
├── test_salary.py         # Тест: доступ к /salary
├── pyproject.toml         # Poetry-конфигурация
├── poetry.lock            # Зафиксированные зависимости
└── README.md              # Инструкция по запуску и API
```

### Используемые технологии:

FastAPI — фреймворк для создания API

Uvicorn — ASGI-сервер для запуска FastAPI

Pytest — фреймворк для тестирования

Poetry — управление зависимостями и окружением

httpx — HTTP-клиент для тестов

